@using Starbender.RecipeApp.Blazor.Components.Button

@inherits RecipeComponentBase

<MudStack Row>
    <MudSpacer/>
    <SeedButton />
    <CreateRecipeButton HandleDialogSavedAsync="HandleDialogSavedAsync" />
</MudStack>

<MudTextField T="string"
              Label="Search recipes"
              Placeholder="Search title or description"
              Variant="Variant.Outlined"
              Margin="Margin.Dense"
              Immediate="true"
              @bind-Value="_searchTerm" />

<MudTable T="RecipeDto" Items="FilteredRecipes" 
    Dense="true" 
    Hover="true" 
    Bordered="true" 
    Striped="true"
    OnRowClick="@HandleRowClick">
    <HeaderContent>
        <MudTh>Title</MudTh>
        <MudTh>Description</MudTh>
        <MudTh>Instructions</MudTh>
        <MudTh>Ingredients</MudTh>
        <MudTh>Actions</MudTh>
    </HeaderContent>

    <RowTemplate>
        <MudTd DataLabel="Title">@context.Title</MudTd>
        <MudTd DataLabel="Description">@context.Description</MudTd>
        <MudTd DataLabel="Instructions">@context.Instructions</MudTd>
        <MudTd DataLabel="Ingredients">@context.IngredientText</MudTd>
        <MudTd DataLabel="Actions">
            <MudIconButton Icon="@Icons.Material.Filled.Delete"
                           Color="Color.Error"
                           Size="Size.Small"
                           OnClick="@(async _ => await DeleteRecipeAsync(context))"
                           @onclick:stopPropagation="true"
                           aria-label="Delete recipe" />
        </MudTd>
    </RowTemplate>
</MudTable>


